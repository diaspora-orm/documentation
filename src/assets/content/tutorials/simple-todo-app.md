# TODO application with _Diaspora_

## Introduction

Managing datas is one of the most important part of an application, and many common patterns consider it as a specific module. For instance, the MVC (_**Model** View Controller_), MVP (_**Model** View Presenter_) & MVVM (_**Model**-View View-**Model**_) have all a dedicated part for data management, called **Model**.

Because it is built as an ORM, **Diaspora** is able to take care of most of the **Model** module, because it allows abstraction on the data. By using such tools, you can only write code to insert, modify or retrieve data from a store, without writing additional logic to convert your raw stored datas into logical components living in your application.

The **adapter** approach for an ORM adds an interesting possibility to speed up our apps evolution, and thus, our development. We'll demonstrate it by switching our **data source** at the end of this tutorial, changing from the *page memory* to a *session-persisten store*, the *local storage*.

 The goal of this tutorial is to do the same *ToDo* app than the one presented on [TodoMVC](http://todomvc.com/), which allows to compare many frameworks implementation for the same result. You can find the full application specification on [their GitHub repository](https://github.com/tastejs/todomvc/blob/master/app-spec.md).

## Preparing the application

### Defining models

First, we need to design the data that our application will interact with. In the *Todo* app, we'll manage only *ToDos*. Each *ToDo* item is represented with:

* a *title*: which is a **required string**
* a *status*: which is a **required boolean**
* an *id*: that should identify our item

Diaspora manages the *id* for us, with the model's adapter *id generation process*. This is part of Diaspora's approach: manage datas the same way, wherever it comes from, without having to take care of each store difference. Diaspora will also use its own polyfills to try to do itself what the store cannot do.
In this case, if our store was a *MongoDB* database, the id would be generated by the database directly, as a response. But in the *memory* or the *local storage*, it should be generated by Diaspora itself.

Our model results in the following attributes description, in JSON format:

```JSON
{
    "title": {
        "type": "string",
        "required": true
    },
    "status": {
        "type": "bool",
        "required": true
    }
}
```

At first, we'll store our data in the browser's *memory*, and we'll change the store later.

### Choosing an MVVM framework

We'll use [vue.js]() as our MVVM framework, to reflect our data on a web page, and [typescript]() (because Diaspora itself is built with typescript). If you decide to use another setup, you can use this tutorial as a general guideline of the process.

We'll simply need to define vue _components_ properties to refresh our dom with the selected data.

https://github.com/diaspora-orm/demo-todomvc-boilerplate

## Initialize the project

We'll first start by creating our project files (with `npm`).

```sh
npm init
npm i -D typescript vue @types/vue
```

## Initialize Diaspora

Now that we have our model attributes, we are ready to start the implementation. As a prerequist, you have to install Diaspora itself, by running `npm install --save @diaspora/diaspora@'~0.3.0'`.

> Note that other versions of Diaspora may require different implementations, so watch out what version you are installing, and the corresponding API.

```ts
+ import { Diaspora } from '@diaspora/diaspora';
+ 
+ Diaspora.declareAdapter('main', 'inMemory');
+ const ToDo = Diasproa.declareModel('ToDo', {
+     dataSource: 'main',
+     attributes: {
+         title: {
+             type: 'string',
+             required: true,
+         },
+         status: {
+             type: 'bool',
+             required: true,
+         },
+     },
+ });
```

**We are done**, our data management is ready! That was simple, isn't it?

## Linking data & interface

Now that we can interact with our datas, we have to implement the views that will reflect the content of the data store.

## Changing the data store

```ts
import { Diaspora } from '@diaspora/diaspora';

- Diaspora.declareAdapter('main', 'inMemory');
+ Diaspora.declareAdapter('main', 'localStorage');
const ToDo = Diasproa.declareModel('ToDo', {
    dataSource: 'main',
```